<!-- app/templates/home.html -->
{% extends "base.html" %}

{% block title %}Farm Analysis - AgriSmart{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <!-- Header -->
        <div class="text-center mb-4">
            <h1 class="display-5 fw-bold text-success">
                <i class="bi bi-graph-up"></i> Farm Analysis
            </h1>
            <p class="lead text-muted">
                Enter your farm details to get AI-powered crop recommendations and insights
            </p>
        </div>

        <!-- Main Form Card -->
        <div class="card">
            <div class="card-header">
                <h4 class="mb-0"><i class="bi bi-clipboard-data"></i> Farm Details</h4>
            </div>
            <div class="card-body">
                <form method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
                    {{ form.hidden_tag() }}
                    
                    <div class="row">
                        <!-- Soil Type -->
                        <div class="col-md-6 mb-3">
                            {{ form.soil_type.label(class="form-label fw-semibold") }}
                            {{ form.soil_type(class="form-select") }}
                            {% if form.soil_type.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.soil_type.errors %}{{ error }}{% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <!-- pH Level -->
                        <div class="col-md-6 mb-3">
                            {{ form.ph.label(class="form-label fw-semibold") }}
                            {{ form.ph(class="form-control", placeholder="e.g., 6.5") }}
                            <div class="form-text">Normal range: 6.0 - 8.0</div>
                            {% if form.ph.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.ph.errors %}{{ error }}{% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <!-- Nitrogen -->
                        <div class="col-md-4 mb-3">
                            {{ form.nitrogen.label(class="form-label fw-semibold") }}
                            {{ form.nitrogen(class="form-control", placeholder="e.g., 50") }}
                            <div class="form-text">Parts per million (ppm)</div>
                            {% if form.nitrogen.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.nitrogen.errors %}{{ error }}{% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <!-- Phosphorus -->
                        <div class="col-md-4 mb-3">
                            {{ form.phosphorus.label(class="form-label fw-semibold") }}
                            {{ form.phosphorus(class="form-control", placeholder="e.g., 30") }}
                            <div class="form-text">Parts per million (ppm)</div>
                            {% if form.phosphorus.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.phosphorus.errors %}{{ error }}{% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <!-- Potassium -->
                        <div class="col-md-4 mb-3">
                            {{ form.potassium.label(class="form-label fw-semibold") }}
                            {{ form.potassium(class="form-control", placeholder="e.g., 40") }}
                            <div class="form-text">Parts per million (ppm)</div>
                            {% if form.potassium.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.potassium.errors %}{{ error }}{% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Location -->
                    <div class="mb-3">
                        {{ form.location.label(class="form-label fw-semibold") }}
                        {{ form.location(class="form-control", placeholder="e.g., Nairobi, Kenya") }}
                        {% if form.location.errors %}
                            <div class="invalid-feedback d-block">
                                {% for error in form.location.errors %}{{ error }}{% endfor %}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Image Upload -->
                    <div class="mb-4">
                        {{ form.image.label(class="form-label fw-semibold") }}
                        <div class="upload-area">
                            <i class="bi bi-cloud-upload fs-1 text-success mb-2"></i>
                            {{ form.image(class="form-control", id="image") }}
                            <div class="form-text mt-2">
                                Upload an image of your crop for disease detection (Optional)
                            </div>
                        </div>
                        {% if form.image.errors %}
                            <div class="invalid-feedback d-block">
                                {% for error in form.image.errors %}{{ error }}{% endfor %}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Submit Button -->
                    <div class="text-center">
                        {{ form.submit(class="btn btn-primary btn-lg px-5") }}
                    </div>
                </form>
            </div>
        </div>

        <!-- Info Cards -->
        <div class="row mt-4">
            <div class="col-md-4">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <i class="bi bi-graph-up-arrow fs-1 text-success mb-3"></i>
                        <h5>Crop Recommendation</h5>
                        <p class="text-muted">Get AI-powered suggestions for optimal crops based on your soil conditions.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <i class="bi bi-bug fs-1 text-warning mb-3"></i>
                        <h5>Disease Detection</h5>
                        <p class="text-muted">Upload crop images to identify potential diseases and get treatment advice.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <i class="bi bi-cloud-sun fs-1 text-info mb-3"></i>
                        <h5>Weather Forecast</h5>
                        <p class="text-muted">Get 7-day weather predictions to plan your farming activities.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}